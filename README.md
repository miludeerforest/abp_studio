# ABP Studio - æ™ºèƒ½å•†å“åœºæ™¯ç”Ÿæˆç³»ç»Ÿ

åŸºäº AI çš„è‡ªåŠ¨åŒ–å•†å“åœºæ™¯ç”Ÿæˆä¸è§†é¢‘åˆ¶ä½œå¹³å°ã€‚ä¸Šä¼ å•†å“å›¾ç‰‡ï¼Œè‡ªåŠ¨åˆ†æç‰¹å¾ã€ç”Ÿæˆå¤šè§’åº¦åœºæ™¯å›¾ï¼Œä¸€é”®ç”Ÿæˆè¥é”€çŸ­è§†é¢‘ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸ¨ **æ‰¹é‡åœºæ™¯ç”Ÿæˆ** | ä¸Šä¼ ç™½åº•å›¾ï¼Œè‡ªåŠ¨ç”Ÿæˆ 9 ç§ä¸åŒè§’åº¦çš„è¥é”€åœºæ™¯å›¾ |
| ğŸ“¹ **è§†é¢‘ç”Ÿæˆ** | å›¾ç‰‡ä¸€é”®è½¬æ¢åŠ¨æ€è§†é¢‘ï¼ˆæ”¯æŒ Sora/Veoï¼‰ |
| ğŸ¬ **ä¸€é•œåˆ°åº•** | è‡ªåŠ¨ç¼–æ’åˆ†é•œï¼Œç”Ÿæˆè¿è´¯æ•…äº‹è§†é¢‘ |
| ğŸ’¥ **è£‚å˜æ¨¡å¼** | å•å›¾ç”Ÿæˆå¤šåˆ†æ”¯åœºæ™¯ï¼Œè‡ªåŠ¨åˆæˆå®Œæ•´è§†é¢‘ |
| ğŸ‘¥ **å¤šç”¨æˆ·ç®¡ç†** | ç”¨æˆ·æƒé™éš”ç¦»ã€ç”¨é‡ç»Ÿè®¡ |
| ğŸ† **ç­‰çº§ç³»ç»Ÿ** | åŸºäºè§†é¢‘è´¨é‡è¯„åˆ†çš„ç”¨æˆ·ç­‰çº§æˆé•¿ |
| ğŸ–¼ï¸ **æµ®åŠ¨ç”»å»Š** | æ–¹ä¾¿çš„å›¾ç‰‡/è§†é¢‘ç®¡ç†ä¸æ‰¹é‡ä¸‹è½½ |

---

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯ (React + Vite)                 â”‚
â”‚                        ç«¯å£: 33012                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    åç«¯ (FastAPI + Python)               â”‚
â”‚                        ç«¯å£: 33013                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PostgreSQL (æ•°æ®åº“)  â”‚  Redis (æ¶ˆæ¯é˜Ÿåˆ—)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒä¾èµ–:**
- Python 3.11+ / FastAPI / SQLAlchemy
- React 18 / Vite
- PostgreSQL (æ•°æ®å­˜å‚¨)
- Redis (ä»»åŠ¡é˜Ÿåˆ— & WebSocket)

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### 1. ç¯å¢ƒè¦æ±‚

- **Docker** 24.0+ 
- **Docker Compose** v2.0+
- **PostgreSQL** 14+ (å¯ä½¿ç”¨ç°æœ‰å®ä¾‹æˆ– Docker éƒ¨ç½²)
- **Redis** 6+ (å¯ä½¿ç”¨ç°æœ‰å®ä¾‹æˆ– Docker éƒ¨ç½²)

### 2. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/abp_studio.git
cd abp_studio
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env
```

### 4. å¿…å¡«é…ç½®è¯´æ˜

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹å¿…å¡«é¡¹ï¼š

#### ğŸ“¦ æ•°æ®åº“é…ç½®

```ini
# PostgreSQL è¿æ¥ä¸²
# æ ¼å¼: postgresql://ç”¨æˆ·å:å¯†ç @ä¸»æœº:ç«¯å£/æ•°æ®åº“å
DATABASE_URL=postgresql://abp_user:your_password@postgres:5432/abp_studio
```

#### ğŸ” å®‰å…¨é…ç½®

```ini
# JWT ç­¾åå¯†é’¥ (å¿…é¡»ä¿®æ”¹! ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ)
# openssl rand -hex 32
SECRET_KEY=your-random-32-char-secret-key-here

# ç®¡ç†å‘˜è´¦å· (é¦–æ¬¡å¯åŠ¨è‡ªåŠ¨åˆ›å»º)
ADMIN_USER=admin
ADMIN_PASSWORD=your_secure_admin_password
```

#### ğŸ“® Redis é…ç½®

```ini
# Redis æœåŠ¡åœ°å€ (å®¹å™¨åæˆ– IP)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
```

### 5. å¯é€‰é…ç½® (API è®¾ç½®)

> ğŸ’¡ **æç¤º**: ä»¥ä¸‹ API é…ç½®ä¹Ÿå¯åœ¨ç™»å½•åé€šè¿‡ã€Œç³»ç»Ÿè®¾ç½®ã€é¡µé¢è¿›è¡Œé…ç½®ã€‚

```ini
# --- å›¾ç‰‡ç”Ÿæˆ API (OpenAI å…¼å®¹) ---
DEFAULT_API_URL=https://your-api-provider.com/v1
DEFAULT_API_KEY=sk-your-api-key
DEFAULT_MODEL_NAME=gemini-2.0-flash-exp

# --- è§†é¢‘ç”Ÿæˆ API ---
VIDEO_API_URL=https://your-video-api.com/v1
VIDEO_API_KEY=sk-your-video-api-key
VIDEO_MODEL_NAME=sora2-portrait-15s
```

### 6. å¯åŠ¨æœåŠ¡

```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ (åå°è¿è¡Œ)
docker compose up -d --build

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
docker compose logs -f
```

### 7. éªŒè¯éƒ¨ç½²

- **å‰ç«¯ç•Œé¢**: http://localhost:33012
- **åç«¯ API**: http://localhost:33013
- **API æ–‡æ¡£**: http://localhost:33013/docs

ä½¿ç”¨ `ADMIN_USER` / `ADMIN_PASSWORD` ç™»å½•ç®¡ç†åå°ã€‚

---

## ğŸŒ ç½‘ç»œé…ç½®

### Docker ç½‘ç»œ

é»˜è®¤é…ç½®ä½¿ç”¨ä¸¤ä¸ªå¤–éƒ¨ç½‘ç»œï¼š

```yaml
networks:
  1panel-network:
    external: true
  flow2api_worker_net:
    external: true
```

å¦‚æœä¸ä½¿ç”¨è¿™äº›ç½‘ç»œï¼Œè¯·ä¿®æ”¹ `docker-compose.yml`ï¼š

```yaml
networks:
  default:
    driver: bridge
```

### åå‘ä»£ç† (1Panel OpenResty)

æœ¬é¡¹ç›®æ¨èä½¿ç”¨ **1Panel** é¢æ¿è‡ªå¸¦çš„ **OpenResty** å®¹å™¨é…ç½®åå‘ä»£ç†å’Œ HTTPSã€‚

#### 1Panel é…ç½®æ­¥éª¤

1. è¿›å…¥ **1Panel** â†’ **ç½‘ç«™** â†’ **åˆ›å»ºç½‘ç«™** â†’ **åå‘ä»£ç†**
2. å¡«å†™åŸŸåï¼Œé€‰æ‹© HTTPS (å¯è‡ªåŠ¨ç”³è¯· Let's Encrypt è¯ä¹¦)
3. ä»£ç†ç›®æ ‡é…ç½®å¦‚ä¸‹ï¼š

| è·¯å¾„ | ä»£ç†ç›®æ ‡ | è¯´æ˜ |
|------|----------|------|
| `/` | `http://frontend:5173` | å‰ç«¯æœåŠ¡ |
| `/api/` | `http://backend:8000` | åç«¯ API |
| `/uploads/` | `http://backend:8000` | é™æ€èµ„æº |
| `/ws` | `http://backend:8000` | WebSocket |

> ğŸ’¡ **æç¤º**: ç”±äºæœåŠ¡éƒ½åœ¨ `1panel-network` ç½‘ç»œä¸­ï¼Œå¯ç›´æ¥ä½¿ç”¨å®¹å™¨åä½œä¸ºä¸»æœºåã€‚

#### OpenResty é…ç½®ç¤ºä¾‹

å¦‚æœéœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œåœ¨ 1Panel çš„ã€Œé…ç½®æ–‡ä»¶ã€ä¸­æ·»åŠ ï¼š

```nginx
# WebSocket æ”¯æŒ
location /ws {
    proxy_pass http://backend:8000;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
    proxy_read_timeout 86400;
}

# åç«¯ API
location /api/ {
    proxy_pass http://backend:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}

# é™æ€æ–‡ä»¶ (7å¤©ç¼“å­˜)
location /uploads/ {
    proxy_pass http://backend:8000;
    proxy_cache_valid 200 7d;
    add_header Cache-Control "public, max-age=604800";
}

# å‰ç«¯
location / {
    proxy_pass http://frontend:5173;
    proxy_set_header Host $host;
}
```

> âš ï¸ **æ³¨æ„**: ç¡®ä¿ `docker-compose.yml` ä¸­çš„æœåŠ¡å·²åŠ å…¥ `1panel-network` ç½‘ç»œã€‚

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æ“ä½œæµç¨‹

| åŠŸèƒ½ | æ­¥éª¤ |
|------|------|
| **åœºæ™¯ç”Ÿæˆ** | ä¸Šä¼ å•†å“å›¾ â†’ æ™ºèƒ½åˆ†æ â†’ ç”Ÿæˆè„šæœ¬ â†’ æ‰¹é‡ç”Ÿæˆå›¾ç‰‡ |
| **è§†é¢‘ç”Ÿæˆ** | é€‰æ‹©å›¾ç‰‡ â†’ ç‚¹å‡»"è½¬ä¸ºè§†é¢‘" â†’ é˜Ÿåˆ—å¤„ç† â†’ é¢„è§ˆä¸‹è½½ |
| **æ•…äº‹æ¨¡å¼** | ä¸Šä¼ å›¾ç‰‡ â†’ è¾“å…¥ä¸»é¢˜ â†’ ç”Ÿæˆåˆ†é•œ â†’ åˆæˆè§†é¢‘ |
| **æ‰¹é‡ä¸‹è½½** | ç”»å»Š â†’ æ‰¹é‡ç®¡ç† â†’ é€‰æ‹©å¤šä¸ª â†’ ğŸ“¦ä¸‹è½½ â†’ ZIPæ‰“åŒ… |

### ç®¡ç†åŠŸèƒ½ (Admin)

- **ç³»ç»Ÿè®¾ç½®**: é…ç½® API å¯†é’¥ã€å¹¶å‘æ•°ã€ç«™ç‚¹æ ‡é¢˜ç­‰
- **ç”¨æˆ·ç®¡ç†**: åˆ›å»º/åˆ é™¤ç”¨æˆ·ï¼ŒæŸ¥çœ‹ç”¨æˆ·ç­‰çº§å’Œç»éªŒå€¼
- **ç›‘æ§é¢æ¿**: æŸ¥çœ‹ç”Ÿæˆç»Ÿè®¡ã€é˜Ÿåˆ—çŠ¶æ€

---

## ğŸ”§ è¿ç»´æ“ä½œ

### æŸ¥çœ‹æ—¥å¿—

```bash
# åç«¯æ—¥å¿—
docker compose logs -f backend

# å‰ç«¯æ—¥å¿—
docker compose logs -f frontend

# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡
docker compose logs -f
```

### é‡å¯æœåŠ¡

```bash
# é‡å¯åç«¯
docker compose restart backend

# é‡å¯æ‰€æœ‰
docker compose restart
```

### æ›´æ–°éƒ¨ç½²

```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker compose up -d --build
```

### æ•°æ®å¤‡ä»½

```bash
# å¤‡ä»½ PostgreSQL æ•°æ®
docker exec postgres pg_dump -U your_user your_db > backup.sql

# å¤‡ä»½ä¸Šä¼ çš„æ–‡ä»¶
tar -czf uploads_backup.tar.gz backend/uploads/
```

---

## ğŸ“ ç›®å½•ç»“æ„

```
abp_studio/
â”œâ”€â”€ backend/               # FastAPI åç«¯
â”‚   â”œâ”€â”€ main.py            # ä¸»åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ queue_manager.py   # ä»»åŠ¡é˜Ÿåˆ—
â”‚   â”œâ”€â”€ video_reviewer.py  # è§†é¢‘è´¨é‡å®¡æ ¸
â”‚   â”œâ”€â”€ websocket_manager.py
â”‚   â”œâ”€â”€ uploads/           # ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ (gitå¿½ç•¥)
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/              # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.jsx        # ä¸»åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ ImageGenerator.jsx
â”‚   â”‚   â”œâ”€â”€ VideoGenerator.jsx
â”‚   â”‚   â”œâ”€â”€ Gallery.jsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docker-compose.yml     # å®¹å™¨ç¼–æ’
â”œâ”€â”€ .env.example           # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .env                   # å®é™…é…ç½® (gitå¿½ç•¥)
â””â”€â”€ README.md              # æœ¬æ–‡æ¡£
```

---

## âš ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **å¿…é¡»ä¿®æ”¹ `SECRET_KEY`**: é»˜è®¤å€¼ä¼šå¯¼è‡´ JWT æ— æ•ˆ
2. **ä½¿ç”¨å¼ºå¯†ç **: `ADMIN_PASSWORD` å’Œ `REDIS_PASSWORD`
3. **é…ç½® HTTPS**: ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ HTTPS
4. **é™åˆ¶ç«¯å£æš´éœ²**: ä»…æš´éœ²å¿…è¦ç«¯å£ç»™åå‘ä»£ç†
5. **å®šæœŸå¤‡ä»½**: æ•°æ®åº“å’Œä¸Šä¼ æ–‡ä»¶

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.7.0 (2025-01-23)
- ğŸ† å®Œæ•´ç”¨æˆ·ç­‰çº§ä½“ç³» (27çº§ä¿®ä»™å¢ƒç•Œ)
- ğŸ“Š è§†é¢‘è´¨é‡ AI å®¡æ ¸ç³»ç»Ÿ
- ğŸ–¼ï¸ æµ®åŠ¨ç”»å»Šå¢å¼º (åˆ†é¡µã€è·³è½¬)

### v1.6.0 (2025-01-07)
- âœ¨ **æ‰¹é‡ä¸‹è½½**: ç”»å»Šæ”¯æŒæ‰¹é‡é€‰æ‹©å›¾ç‰‡/è§†é¢‘æ‰“åŒ…ä¸ºZIPä¸‹è½½
- ğŸ”§ è§†é¢‘ä¸‹è½½ä¿®å¤: ç¡®ä¿ä¸‹è½½MP4è€Œéé¢„è§ˆå›¾

### v1.5.0 (2024-12-31)
- ğŸ” AIè§†é¢‘è´¨é‡å®¡æŸ¥ (å¤šç»´åº¦è¯„åˆ†)
- ğŸ–¼ï¸ æµ®åŠ¨ç”»å»Š (å³ä¾§æŠ½å±‰å¼)
- ğŸ“… æ—¥æœŸç­›é€‰åŠŸèƒ½

### v1.4.0 (2024-12-14)
- ğŸŒ å…¬å¼€ç”»å»Š (æ— ç™»å½•è®¿é—®)
- ğŸ‘¤ ç”¨æˆ·æ¡£æ¡ˆç®¡ç†
- ğŸ” TurnstileäººæœºéªŒè¯

### v1.3.0 (2024-12-13)
- ğŸ’¥ è£‚å˜ç”Ÿæˆæ¨¡å¼
- ğŸ“Š å®æ—¶ç›‘æ§å¢å¼º

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯: `git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹: `git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/amazing-feature`
5. æäº¤ Pull Request

---

## ğŸ“œ License

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶
